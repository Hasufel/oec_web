<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- If run on a server, you can include your own header that includes a navigation bar, etc -->
<!-- ** start server side header ** -->
<script language="php"> include "./.inc/header.php"; if (false){ </script> 
<head profile="http://www.w3.org/2005/10/profile">
<link rel="icon" type="image/ico" href="favicon.ico" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/><meta name="description" content="description"/>
<title>Open Exoplanet Catalogue</title>
<link rel="stylesheet" type="text/css" href="./css/style.css" media="screen" />
<link rel="stylesheet" type="text/css" href="./css/tables.css" media="screen" />
</head>
<body>
<div class="outer-container">
<div class="inner-container">
<div class="content">
<!-- ** end server side header ** -->
<script language="php"> } </script>
<!-- ########################### -->
<h2><img src="./img/kig.png" alt="kig" />Correlation diagrams</h2>
<p>This page is currently under development. 
It uses the d3 javascript library to render correlation plots directly in your browser. 
Once you've loaded this page, you can change the plot even without an internet connection.
The plots shows a scatter plot of all discovered planets.
Hover over a circle to see to which planet it corresponds. Click on it to view the planet's page.
</p>


<!-- ########################### -->
<style type="text/css">
label input {
	margin-right:	0.5em;
}
#viz text {
	font-family: 	sans-serif;
	font-size: 	12px;
}
div#pop-up {
	display: 	none;
	position:	absolute;
	color: 		white;
	font-size: 	14px;
	background: 	rgba(0,0,0,0.6);
	padding: 	5px 10px 5px 10px;
	-moz-border-radius: 8px 8px;
	border-radius:	8px 8px;
	width: 		16em;
}
div#pop-up-title {
	font-size: 	15px;
	width:		16em;
	margin-bottom:	4px;
	font-weight: 	bolder;
}
div#pop-up-content {
	font-size: 	12px;
}
div#pop-up-values {
	padding-top: 	8px;
	font-size: 	12px;
}
div#pop-up-values span{
	display: 	inline-block;
	width: 		10.5em;
}
.spec{
	vertical-align:	top;
}
</style>
<!-- ########################### -->
<div id="viz" style="float:left"></div>
<div id="pop-up">
        <div id="pop-up-title">Title</div>
        <div id="pop-up-content">Description</div>
        <div id="pop-up-values">Values</div>
</div>
<!-- ########################### -->
<div class="spacer"></div>
<table cellspacing="0" summary="Settings" style="float:left">
<tr>
	<th scope="col" class="nobg"> </th>
	<th scope="col" class="thname">Options<br/> <small>The plot updates automatically when an option is changed.</small> </th>
</tr>
<tr>
	<th rowspan="4" scope="row" class="spec">
		<label>x-axis</label>
	</th>
	<td class="data">
		<select name="xaxis" id="xaxis" onchange="updatePlot()">
		<option selected="selected" value="semimajoraxis">Semi-major axis [AU]</option>
		<option value="mass">Mass [MJup]</option>
		<option value="radius">Radius [RJup]</option>
		<option value="period">Period [days]</option>
		<option value="eccentricity">Eccentricity</option>
		<option value="temperature">Temperature [K]</option>
		<option value="inclination">Inclination [deg]</option>
		<option value="discoveryyear">Discoveryyear</option>
		</select>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="logscalex"><input checked="checked" name="logscale" type="checkbox" value="x" id="logscalex" onclick="updatePlot()"/>Logarithmic scale</label>

	</td>
</tr>
<tr>
	<td class="data">
		<label for="xrangeauto"><input checked="checked" name="xrangeauto" type="checkbox" value="a" id="xrangeauto" onclick="xrangeUpdate()"/>Automatic range</label>
	</td>
</tr>
<tr>
	<td class="data" id="xrangerow" style="display:none;">
		range = [<input type="text" name="xrangel" size="8" value="0" onkeyup="xrangeUpdate()"/>,
		<input type="text" name="xranger" size="8" value="0" onkeyup="xrangeUpdate()"/>]
	</td>
</tr>
<tr>
	<th rowspan="4" class="spec" scope="row">
		<label>y-axis</label>
	</th>
	<td class="data">
		<select name="yaxis" id="yaxis" onchange="updatePlot()">
		<option value="semimajoraxis">Semi-major axis [AU]</option>
		<option selected="selected" value="mass">Mass [MJup]</option>
		<option value="radius">Radius [RJup]</option>
		<option value="eccentricity">Eccentricity</option>
		<option value="period">Period [days]</option>
		<option value="temperature">Temperature [K]</option>
		<option value="inclination">Inclination [deg]</option>
		<option value="discoveryyear">Discoveryyear</option>
		</select>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="logscaley"><input checked="checked" name="logscale" type="checkbox" value="y" id="logscaley" onclick="updatePlot()"/>Logarithmic scale</label>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="yrangeauto"><input checked="checked" name="yrangeauto" type="checkbox" value="a" id="yrangeauto" onclick="yrangeUpdate()"/>Automatic range</label>
	</td>
</tr>
<tr>
	<td class="data" id="yrangerow" style="display:none;">
		range = [<input type="text" name="yrangel" size="8" value="0" onkeyup="yrangeUpdate()"/>,
		<input type="text" name="yranger" size="8" value="0" onkeyup="yrangeUpdate()"/>]
	</td>
</tr>
<tr>
	<th rowspan="4" class="spec" scope="row">
		<label>Color</label>
	</th>
	<td class="data">
		<select name="coloraxis" id="coloraxis" onchange="updatePlot();colorrangeUpdate();">
		<option value="none">Constant</option>
		<option value="discoverymethod">Discoverymethod</option>
		<option value="semimajoraxis">Semi-major axis [AU]</option>
		<option value="mass">Mass [MJup]</option>
		<option selected="selected" value="radius">Radius [RJup]</option>
		<option value="eccentricity">Eccentricity</option>
		<option value="period">Period [days]</option>
		<option value="temperature">Temperature [K]</option>
		<option value="inclination">Inclination [deg]</option>
		<option value="discoveryyear">Discoveryyear</option>
		</select>
	</td>
</tr>
<tr>
	<td class="data" id="logscalecolorrow">
		<label for="logscalecolor"><input name="logscalecolor" type="checkbox" value="color" id="logscalecolor" onclick="updatePlot()"/>Logarithmic scale</label>

	</td>
</tr>
<tr>
	<td class="data" id="colorrangeautorow">
		<label for="colorrangeauto"><input checked="checked" name="colorrangeauto" type="checkbox" value="a" id="colorrangeauto" onclick="colorrangeUpdate()"/>Automatic range</label>
	</td>
</tr>
<tr>
	<td class="data" id="colorrangerow" style="display:none;">
		range = [<input type="text" name="colorrangel" size="8" value="0" onkeyup="colorrangeUpdate()"/>,
		<input type="text" name="colorranger" size="8" value="0" onkeyup="colorrangeUpdate()"/>]
	</td>
</tr>
<tr>
	<th rowspan="5" class="spec" scope="row">
		<label>Point size</label>
	</th>
	<td class="data">
		<select name="sizeaxis" id="sizeaxis" onchange="updatePlot();sizerangeUpdate();">
		<option selected="selected" value="none">Constant</option>
		<option value="semimajoraxis">Semi-major axis [AU]</option>
		<option value="mass">Mass [MJup]</option>
		<option value="radius">Radius [RJup]</option>
		<option value="eccentricity">Eccentricity</option>
		<option value="period">Period [days]</option>
		<option value="temperature">Temperature [K]</option>
		<option value="inclination">Inclination [deg]</option>
		<option value="discoveryyear">Discoveryyear</option>
		</select>
	</td>
</tr>
<tr>
	<td class="data" id="logscalesizerow" style="display:none;">
		<label for="logscalesize"><input name="logscalesize" type="checkbox" value="size" id="logscalesize" onclick="updatePlot()"/>Logarithmic scale</label>

	</td>
</tr>
<tr>
	<td class="data" id="sizerangeautorow" style="display:none;">
		<label for="sizerangeauto"><input checked="checked" name="sizerangeauto" type="checkbox" value="a" id="sizerangeauto" onclick="sizerangeUpdate()"/>Automatic range</label>
	</td>
</tr>
<tr>
	<td class="data" id="sizerangerow" style="display:none;">
		range = [<input type="text" name="sizerangel" size="8" value="0" onkeyup="sizerangeUpdate()"/>,
		<input type="text" name="sizeranger" size="8" value="0" onkeyup="sizerangeUpdate()"/>]
	</td>
</tr>
<tr>
	<td class="data">
		<label for="sizemax">Maximum point size = <input type="text" name="sizemax" id="sizemax" size="3" value="4" onkeyup="sizerangeUpdate()"/></label>
		
	</td>
</tr>
<tr>
	<th rowspan="6" class="spec" scope="row">
	Detection methods
	</th>
	<td class="data">
		<label for="filter_transit"><input checked="checked" name="discoveryfilter" type="checkbox" value="transit" id="filter_transit" onclick="updatePlot()"/>Transiting planets</label>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="filter_rv"><input checked="checked" name="discoveryfilter" type="checkbox" value="RV" id="filter_rv" onclick="updatePlot()"/>Radial velocity planets</label>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="filter_microlensing"><input checked="checked" name="discoveryfilter" type="checkbox" value="microlensing" id="filter_microlensing" onclick="updatePlot()"/>Microlensing planets</label>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="filter_imaged"><input checked="checked" name="discoveryfilter" type="checkbox" value="imaging" id="filter_imaged" onclick="updatePlot()"/>Directly imaged planets</label>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="filter_timing"><input checked="checked" name="discoveryfilter" type="checkbox" value="timing" id="filter_timing" onclick="updatePlot()"/>Planets found by pulsar timing</label>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="filter_other"><input checked="checked" name="discoveryfilter" type="checkbox" value="" id="filter_other" onclick="updatePlot()"/>Planets found by other methods</label>
	</td>
</tr>
<tr>
	<th rowspan="3" class="spec" scope="row">
	Stellar multiplicity
	</th>
	<td class="data">
		<label for="stellarmultiplicity_all"><input checked="checked" name="stellarmultiplicity" type="radio" value="all" id="stellarmultiplicity_all" onclick="updatePlot()"/>All planets</label>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="stellarmultiplicity_ptype"><input name="stellarmultiplicity" type="radio" value="ptype" id="stellarmultiplicity_circumbinary" onclick="updatePlot()"/>Only circumbinary planets, P-type</label>
	</td>
</tr>
<tr>
	<td class="data">
		<label for="stellarmultiplicity_stype"><input name="stellarmultiplicity" type="radio" value="stype" id="stellarmultiplicity_stype" onclick="updatePlot()"/>Only planets around stars with<br />a wide binary companion, S-type</label>
	</td>
</tr>
<tr>
	<th rowspan="1" class="spec" scope="row">
	Export
	</th>
	<td class="data">
		<input type="button" onclick="saveaspng()" value="Save plot as png file" />
	</td>
</tr>
</table>
<!-- ########################### -->
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/rgbcolor.js"></script> 
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/canvg.js"></script> 
<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
var width 	= 600;
var height 	= 500;
var paddingt 	= 10;
var paddingb 	= 35;
var paddingl 	= 65;
var paddingr 	= 10;

var first 	= true;
var viz = d3.select("#viz")
	.append("svg")
	.attr("width", width)
	.attr("height", height)
	;    
var gxaxis = viz.append("g")
	.attr("transform", "translate(0," + (height - paddingb-paddingt) + ")");
	;
var gyaxis = viz.append("g")
	.attr("transform", "translate(" + paddingl + ", 0)")
	;
var gxaxislabel = viz.append("text")
	.attr("text-anchor", "middle")
	.attr("x", width/2.)
	.attr("y", height - 6)
	;
var gyaxislabel = viz.append("text")
	.attr("text-anchor", "middle")
	.attr("x", -height/2.)
	.attr("y", 12)
	.attr("transform", "rotate(-90)")
	;
	
function saveaspng(){
	d3.select("body").append("canvas")
		.attr("width",width)	
		.attr("height",height)	
		.attr("id","canvas")
		.style("display","none")
		;	
	canvg('canvas', $("#viz").html());
	var canvas = document.getElementById("canvas");
	window.location = canvas.toDataURL("image/png");
}
	
var xDomain;
var yDomain;
var colorDomain;
var sizeDomain;  
var sizemax;

function xrangeUpdate(){
	if(d3.select("#xrangeauto").node().checked){
		$("#xrangerow").hide();
		updatePlot();
	}else{
		$("#xrangerow").show();
		var newxDomain = [ parseFloat(d3.select("[name=xrangel]").node().value), parseFloat(d3.select("[name=xranger]").node().value) ];
		if (newxDomain[0]!=xDomain[0] || newxDomain[1]!=xDomain[1]){
			xDomain = newxDomain;
			updatePlot();
		}
	}
}
function yrangeUpdate(){
	if(d3.select("#yrangeauto").node().checked){
		$("#yrangerow").hide();
		updatePlot();
	}else{
		$("#yrangerow").show();
		var newyDomain = [ parseFloat(d3.select("[name=yrangel]").node().value), parseFloat(d3.select("[name=yranger]").node().value) ];
		if (newyDomain[0]!=yDomain[0] || newyDomain[1]!=yDomain[1]){
			yDomain = newyDomain;
			updatePlot();
		}
	}
}
function colorrangeUpdate(){
	if(colorkey=="none"){
		$("#colorrangeautorow").hide();
		$("#logscalecolorrow").hide();
	}else{
		$("#colorrangeautorow").show();
		$("#logscalecolorrow").show();
	}
	if(d3.select("#colorrangeauto").node().checked){
		$("#colorrangerow").hide();
		updatePlot();
	}else{
		$("#colorrangerow").show();
		var newcolorDomain = [ parseFloat(d3.select("[name=colorrangel]").node().value), parseFloat(d3.select("[name=colorranger]").node().value) ];
		if (newcolorDomain[0]!=colorDomain[0] || newcolorDomain[1]!=colorDomain[1]){
			colorDomain = newcolorDomain;
			updatePlot();
		}
	}
}

function sizerangeUpdate(){
	if(sizekey=="none"){
		$("#sizerangeautorow").hide();
		$("#logscalesizerow").hide();
	}else{
		$("#sizerangeautorow").show();
		$("#logscalesizerow").show();
	}
	if(d3.select("#sizerangeauto").node().checked){
		$("#sizerangerow").hide();
		updatePlot();
	}else{
		$("#sizerangerow").show();
		var newsizeDomain = [ parseFloat(d3.select("[name=sizerangel]").node().value), parseFloat(d3.select("[name=sizeranger]").node().value) ];
		var newsizemax = parseFloat($("#sizemax").val());
		if (newsizeDomain[0]!=sizeDomain[0] || newsizeDomain[1]!=sizeDomain[1] || newsizemax!=sizemax){
			sizeDomain = newsizeDomain;
			updatePlot();
		}
	}
}

var colorkey;
var colorScale;
var sizekey;
var sizeScale;
var logscalesize;
var logscalecolor;

function getColor(d){
	var elem = d.getElementsByTagName(colorkey);
	if (!elem.length) return null;
	var text = $(elem[0]).text();
	var f = parseFloat(text);
	if (logscalecolor && f<=0.) return null;
	return	f; 
}
function color(d){
	var elem = d.getElementsByTagName(colorkey);
	if (!elem.length) return "gray";
	var text = $(elem[0]).text();
	if (colorkey=="discoverymethod"){
		if (text=="RV") return "red";
		if (text=="transit") return "green";
		if (text=="imaging") return "blue";
		if (text=="timing") return "yellow";
		if (text=="microlensing") return "purple";
	}else{
		var f = parseFloat(text);
		if (logscalecolor && f<=0.) return "#4D4D4D";
		return d3.hsl(120.-colorScale(f), 1, 0.5);
	}
}

function getSize(d){
	if (sizekey=="none") return 1;
	var elem = d.getElementsByTagName(sizekey);
	if (!elem.length) return undefined;
	var text = $(elem[0]).text();
	var f = parseFloat(text);
	if (logscalesize && f<=0.) return null;
	return f;
}
function size(d){
	if (sizekey=="none") return sizemax;
	var elem = d.getElementsByTagName(sizekey);
	if (!elem.length) return null;
	var text = $(elem[0]).text();
	var f = parseFloat(text);
	if (logscalesize && f<=0.) return null;
	return sizeScale(f);
}

var updatePlot = function(){ 
	var discoveryfilter = d3.selectAll("input[name=discoveryfilter]:checked");
	var stellarmultiplicity = $("input:radio[name=stellarmultiplicity]:checked").val();

	var xkey 	= $("#xaxis option:selected").val();
	var ykey 	= $("#yaxis option:selected").val();
	colorkey 	= $("#coloraxis option:selected").val();
	sizekey  	= $("#sizeaxis option:selected").val();

	var xlabel 	= $("#xaxis option:selected").text();
	var ylabel    	= $("#yaxis option:selected").text();
	var colorlabel	= $("#coloraxis option:selected").text();
	var sizelabel 	= $("#sizeaxis option:selected").text();

	var logscalex 	= $("#logscalex").is(":checked");
	var logscaley 	= $("#logscaley").is(":checked");
	logscalecolor 	= $("#logscalecolor").is(":checked");
	logscalesize  	= $("#logscalesize").is(":checked");

	sizemax = parseFloat($("#sizemax").val());

	var planetsxml;
	switch(stellarmultiplicity){
		case "all":
			planetsxml = d3.select(xmldata).selectAll("planet")[0];
			break;
		case "ptype":
			planetsxml = d3.select(xmldata).selectAll("binary > planet")[0];
			break;
		case "stype":
			planetsxml = d3.select(xmldata).selectAll("binary star planet")[0];
			break;
	}
	var planets = planetsxml.filter(function(d) {
		var discoverymethod = d.getElementsByTagName("discoverymethod");
		if (!discoverymethod.length){
			discoverymethod = "";
		}else{
			discoverymethod = $(discoverymethod[0]).text();
		}
		var isInSelection = false;
		discoveryfilter[0].forEach(function(d){
			if(d.value==discoverymethod){
				isInSelection = true;
			}
		});
		if (!isInSelection){
			return false;
		}
		var tagx = d.getElementsByTagName(xkey);
		if(!tagx.length) return false;
		if(logscalex && $(tagx[0]).text()<=0.) return false;
		var tagy = d.getElementsByTagName(ykey);
		if(!tagy.length) return false;
		if(logscaley && $(tagy[0]).text()<=0.) return false;
		return true;
	});
	if(d3.select("#xrangeauto").node().checked){
		xDomain = d3.extent(planets, function(d) { 
				return	parseFloat($(d.getElementsByTagName(xkey)[0]).text()); 
			});
		d3.select("[name=xrangel]").node().value = xDomain[0];
		d3.select("[name=xranger]").node().value = xDomain[1];
	}

	if(d3.select("#yrangeauto").node().checked){
		yDomain = d3.extent(planets, function(d) { 
				return	parseFloat($(d.getElementsByTagName(ykey)[0]).text()); 
			});
		d3.select("[name=yrangel]").node().value = yDomain[0];
		d3.select("[name=yranger]").node().value = yDomain[1];
	}
	if(d3.select("#colorrangeauto").node().checked){
		colorDomain = d3.extent(planets, function(d) { 
				return getColor(d); 
			});
		d3.select("[name=colorrangel]").node().value = colorDomain[0];
		d3.select("[name=colorranger]").node().value = colorDomain[1];
	}
	if(d3.select("#sizerangeauto").node().checked){
		sizeDomain = d3.extent(planets, function(d) { 
				return getSize(d); 
			});
		d3.select("[name=sizerangel]").node().value = sizeDomain[0];
		d3.select("[name=sizeranger]").node().value = sizeDomain[1];
	}

	var xScale;
	if (logscalex){
		xScale = d3.scale.log();
	}else{
		xScale = d3.scale.linear();
	}
	xScale.domain(xDomain)
		.clamp(true)
		.range([paddingl, width-paddingl-paddingr]);
	var yScale;
	if (logscaley){
		yScale = d3.scale.log();
	}else{
		yScale = d3.scale.linear();
	}
	yScale.domain(yDomain)
		.clamp(true)
		.range([height - paddingb-paddingt,paddingt]);
	if (logscalecolor){
		colorScale = d3.scale.log();
	}else{
		colorScale = d3.scale.linear();
	}
	colorScale.domain(colorDomain)
		.clamp(true)
		.range([0,120]);
	if (logscalesize){
		sizeScale = d3.scale.log();
	}else{
		sizeScale = d3.scale.linear();
	}
	sizeScale.domain(sizeDomain)
		.clamp(true)
		.range([0,sizemax]);


  	var circle = viz.selectAll("circle")
		.data(planets,function(d) {return $(d.getElementsByTagName("name")[0]).text(); });

	circle.enter().append("circle")
		.attr("cx", function(d) { return xScale($(d.getElementsByTagName(xkey)[0]).text()); })
		.attr("cy", function(d) { return yScale($(d.getElementsByTagName(ykey)[0]).text()); })
		.attr("r", function(d) {return size(d); })
		.style("fill", function(d) { return color(d); })
		.style("stroke", "black")
		.style("opacity",(first?1:0))
		.on("click", function(d) {
			document.location.href = "/system.php?id=" + $(d.getElementsByTagName("name")[0]).text();
		})
		.on("mouseout", function(d){
			d3.select("#pop-up").style("display","none");
		})
		.on("mousemove", function(){
			d3.select("#pop-up").style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");
		})
		;


	circle
		.on("mouseover", function(d){
			var name = $(d.getElementsByTagName("name")[0]).text();
			var description = $(d.getElementsByTagName("description")[0]).text();
			d3.select("#pop-up").style("display","inline");
			d3.select("#pop-up-title").html(name);
			if (description){
				d3.select("#pop-up-content").html(description);
			}else{
				d3.select("#pop-up-content").html("");
			}
			var values = "";
			values += 		 "<span>" +	xlabel + ":</span>" + $(d.getElementsByTagName(xkey)[0]).text()
					+  "<br /><span>" +	ylabel + ":</span>" + $(d.getElementsByTagName(ykey)[0]).text();
			if (colorkey!="none"&&getColor(d)){
				values +=  "<br /><span>" +	colorlabel + ":</span>" + $(d.getElementsByTagName(colorkey)[0]).text();
			}
			if (sizekey!="none"&&size(d)){
				values +=  "<br /><span>" +	sizelabel + ":</span>" + $(d.getElementsByTagName(sizekey)[0]).text();
			}

			$("#pop-up-values").html(values);

		})
		.transition()
		.duration( (first?0:500) )
		.attr("cx", function(d) { return xScale($(d.getElementsByTagName(xkey)[0]).text()); })
		.attr("cy", function(d) { return yScale($(d.getElementsByTagName(ykey)[0]).text()); })
		.attr("r", function(d) {return size(d); })
		.style("fill", function(d) { return color(d); })
		.style("opacity",1)
		;

	circle.exit()
		.transition()
		.style("opacity",0)
		.remove();


	
	var xAxis = d3.svg.axis()
		.scale(xScale)
		.ticks(5)
		.orient("bottom");
	var yAxis = d3.svg.axis()
		.scale(yScale)
		.ticks(5)
		.orient("left");

	if (first){
		gxaxis.call(xAxis);
		gyaxis.call(yAxis);
	}else{
		gxaxis.transition().call(xAxis);
		gyaxis.transition().call(yAxis);
	}
	gxaxis.selectAll("path,line")
		.style("fill","none")
		.style("stroke","black");
	gyaxis.selectAll("path,line")
		.style("fill","none")
		.style("stroke","black");
			
	gxaxislabel.text(xlabel);
	gyaxislabel.text(ylabel);

	first = false;
};

var xmldata = null;

d3.xml("systems.xml", "application/xml", function(xml) {
	xmldata = xml;
	updatePlot();	
});

    
</script>
<div class="spacer" style="clear:left"></div>

<!-- ########################### -->
<h2><img src="./img/xml.png" alt="star" />Data download</h2>
<p>
The data presented in this plot is taken from the <a href="https://github.com/hannorein/open_exoplanet_catalogue">Open Exoplanet Catalogue</a>. All information on this page is directly generated from the XML files in the catalogue. If you are interested in how, look at the source code. You can download the entire catalogue on <a href="https://github.com/hannorein/open_exoplanet_catalogue/">github</a>. You can also find ASCII tables of the same catalogue <a href="https://github.com/hannorein/oec_tables/">in a separate repository</a>. Some information, especially in the case of a binary system cannot be easily represented in an ASCII table. You are therefore encouraged to use the original XML files provided by the Open Exoplanet Catalogue. 
</p>


<!-- If run on a server, you can include your own footer  -->
<!-- ** start server side header ** -->
<script language="php"> include "./.inc/footer.php"; if (false){ </script> 
</div> <!-- content -->
<div class="clearer">&nbsp;</div>
<div class="footer">
The data on this page is taken from the <a href="http://github.com/hannorein/open_exoplanet_catalogue">Open Exoplanet Catalogue</a>. The Open Exoplanet Catalogue as well as this website itself is licensed under an <a href="https://github.com/hannorein/open_exoplanet_catalogue/blob/master/README.md">MIT license</a>.
</div> <!-- footer -->
</div> <!-- inner container -->
</div> <!-- outer container -->
</body>
</html>
